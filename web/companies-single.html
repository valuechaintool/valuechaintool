{{ define "content" }}
<a class="btn btn-primary" href="/companies/{{ .Company.ID }}/edit">Edit company</a>
<a class="btn btn-danger" href="/companies/{{ .Company.ID }}/delete">Delete company</a>
<div class="row">
    <div class="col-md-4">
        <div class="card">
            <div class="card-body">
                <table width=100%>
                    <tr>
                        <th>Name</th>
                        <td>{{ .Company.Name }}</td>
                    </tr>
                    <tr>
                        <th>Sector</th>
                        <td>{{ .Company.Sector.Name }}</td>
                    </tr>
                    <tr>
                        <th>Type</th>
                        <td>{{ .Company.Type.Name }} ({{ .Company.Type.Abbreviation }})</td>
                    </tr>
                    <tr>
                        <th>Headquarter Country</th>
                        <td>{{ .Company.Country }}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class="col-md-12" style="margin-top:30px;">
        <div class="card">
            <div class="card-body">
                <table style="width: 100%">
                    <tr>
                        {{ range $i, $c := .CompanyTypes }}<td style="width: 10%; vertical-align: top;">
                            <b>{{ $c.Abbreviation }}</b>
                            <a href="#" onclick="javascript:document.getElementById('new-{{ $c.Abbreviation }}').style.display = 'block';"><i class="fas fa-plus" style="color: green"></i></a>
                            <br />
                            <div class="card" id="new-{{ $c.Abbreviation }}" style="width: 100%; display: none;">
                                <div class="card-body">
                                    <form method="post" action="/relationships/new">
                                        <div class="form-group" style="display: none;">
                                            <label for="type">Company</label>
                                            <select class="custom-select my-1 mr-sm-2" id="left" name="left">
                                                <option value="{{ $.Company.ID }}" selected>{{ $.Company.Name }}</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="type">Name</label>
                                            <select class="custom-select my-1 mr-sm-2" id="right" name="right">
                                                {{ range $j, $x := (index $.Companies (uts $c.ID)) }}<option value="{{ $x.ID }}">{{ $x.Name }}</option>{{ end }}
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="tier">Tier</label>
                                            <select class="custom-select my-1 mr-sm-2" id="tier" name="tier">
                                                {{ range $j, $t := $.Tiers }}<option value="{{ $j }}">{{ $t.Name }}</option>{{ end }}
                                            </select>
                                        </div>
                                        <button type="submit" class="btn btn-primary">Submit</button>
                                    </form>
                                </div>
                            </div>
                            {{ range $j, $r := (index $.Company.Relationships (uts $c.ID)) }}
                            <a href="/relationships/{{ $r.ID }}/delete"><i class="fas fa-trash"></i></a>
                            <a href="/companies/{{ uts $r.RightCompany.ID}}">{{ $r.RightCompany.Name }}</a>
                            <i class="fas fa-medal" style="color: #{{ (index $.Tiers $r.Tier).Color }}"></i>
                            {{ end }}
                        </td>{{ end }}
                    </tr>
                    <tr>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>
{{ end }}
